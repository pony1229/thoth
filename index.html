<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>æ‰˜ç‰¹å¡”ç¾…æŠ½ç‰Œå™¨</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: start;
      padding-top: 40px;
      min-height: 100vh;
      background: linear-gradient(to bottom, #1e2a3a, #2c3e50);
      color: #e0e6ed;
    }
    h1 {
      font-size: 2em;
      margin-bottom: 10px;
      color: #a4c3f0;
    }
    input {
      margin-top: 10px;
      padding: 10px;
      width: 300px;
      font-size: 1em;
      border: none;
      border-radius: 6px;
      background: #304258;
      color: #fff;
    }
    button {
      margin-top: 10px;
      padding: 10px 20px;
      font-size: 1em;
      border: none;
      border-radius: 6px;
      background-color: #4a6fa5;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    button:hover {
      background-color: #6c91cc;
    }
    .small-btn {
      margin-left: 10px;
      padding: 5px 10px;
      font-size: 0.85em;
      background-color: #3d5679;
      border-radius: 4px;
    }
    #result {
      margin-top: 20px;
      font-size: 1.2em;
      text-align: center;
      white-space: pre-line;
      background: #273649;
      padding: 15px;
      border-radius: 10px;
      width: 90%;
      max-width: 700px;
    }
    #images {
      margin-top: 10px;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
    }
    #images img {
      width: 30%;
      max-width: 200px;
      height: auto;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    }
    #history {
      margin-top: 30px;
      width: 90%;
      max-width: 600px;
      font-size: 0.95em;
      color: #ccd6e0;
    }
    #history h3 {
      color: #a4c3f0;
    }
    .history-entry {
      background: #1f2b3a;
      padding: 10px;
      border-radius: 8px;
      margin-bottom: 10px;
      position: relative;
    }
    .history-entry-buttons {
      margin-top: 8px;
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }
    hr {
      border: 0;
      border-top: 1px solid #3a4a5a;
      margin: 12px 0;
    }
  </style>
</head>
<body>
  <h1>æ‰˜ç‰¹å¡”ç¾…æŠ½ç‰Œå™¨</h1>
  <input id="question" placeholder="æƒ³å•çš„å•é¡Œï¼ˆå¯ç©ºç™½ï¼‰">
  <button onclick="drawCards()">æŠ½ä¸‰å¼µç‰Œ</button>
  <div id="result"></div>
  <div id="images"></div>
  <button onclick="copyResult()">ğŸ“‹ è¤‡è£½çµæœ</button>
  <div id="history"></div>

  <script>
    const cards = [
      "0 æ„šäºº", "I é­”æ³•å¸«", "II å¥³ç¥­å¸", "III çš‡å", "IV çš‡å¸", "V å¤§ç¥­å¸",
      "VI æˆ€äºº", "VII æˆ°è»Š", "VIII èª¿ç¯€", "IX éš±è€…", "X å‘½é‹ä¹‹è¼ª",
      "XI æ…¾æœ›", "XII åŠäºº", "XIII æ­»ç¥", "XIV è—è¡“", "XV æƒ¡é­”", "XVI å¡”",
      "XVII æ˜Ÿæ˜Ÿ", "XVIII æœˆäº®", "XIX å¤ªé™½", "XX æ–°ç´€å…ƒ", "XXI å®‡å®™",
      "æ¬Šæ–ç‹ç‰Œ", "æ¬Šæ–äºŒï¼ˆçµ±æ²»ï¼‰", "æ¬Šæ–ä¸‰ï¼ˆç¾å¾·ï¼‰", "æ¬Šæ–å››ï¼ˆå®Œæˆï¼‰", "æ¬Šæ–äº”ï¼ˆçˆ­é¬¥ï¼‰",
      "æ¬Šæ–å…­ï¼ˆå‹åˆ©ï¼‰", "æ¬Šæ–ä¸ƒï¼ˆå‹‡æ°£ï¼‰", "æ¬Šæ–å…«ï¼ˆè¿…é€Ÿï¼‰", "æ¬Šæ–ä¹ï¼ˆåŠ›é‡ï¼‰", "æ¬Šæ–åï¼ˆå£“åŠ›ï¼‰",
      "æ¬Šæ–ç‹å­", "æ¬Šæ–å…¬ä¸»", "æ¬Šæ–å¥³ç‹", "æ¬Šæ–é¨å£«",
      "è–æ¯ç‹ç‰Œ", "è–æ¯äºŒï¼ˆæ„›ï¼‰", "è–æ¯ä¸‰ï¼ˆè±ç››ï¼‰", "è–æ¯å››ï¼ˆæ··äº‚ï¼‰", "è–æ¯äº”ï¼ˆå¤±æœ›ï¼‰",
      "è–æ¯å…­ï¼ˆæ„‰æ‚…ï¼‰", "è–æ¯ä¸ƒï¼ˆå¹»è±¡ï¼‰", "è–æ¯å…«ï¼ˆæ€ æƒ°ï¼‰", "è–æ¯ä¹ï¼ˆå¹¸ç¦ï¼‰", "è–æ¯åï¼ˆé£½å’Œï¼‰",
      "è–æ¯ç‹å­", "è–æ¯å…¬ä¸»", "è–æ¯å¥³ç‹", "è–æ¯é¨å£«",
      "å¯¶åŠç‹ç‰Œ", "å¯¶åŠäºŒï¼ˆå¹³è¡¡ï¼‰", "å¯¶åŠä¸‰ï¼ˆæ‚²å‚·ï¼‰", "å¯¶åŠå››ï¼ˆä¼‘æˆ°ï¼‰", "å¯¶åŠäº”ï¼ˆæ“Šæ½°ï¼‰",
      "å¯¶åŠå…­ï¼ˆç§‘å­¸ï¼‰", "å¯¶åŠä¸ƒï¼ˆè©­è¨ˆï¼‰", "å¯¶åŠå…«ï¼ˆå¹²æ¶‰ï¼‰", "å¯¶åŠä¹ï¼ˆæ®˜é…·ï¼‰", "å¯¶åŠåï¼ˆæ¯€æ»…ï¼‰",
      "å¯¶åŠç‹å­", "å¯¶åŠå…¬ä¸»", "å¯¶åŠå¥³ç‹", "å¯¶åŠé¨å£«",
      "åœ“ç›¤ç‹ç‰Œ", "åœ“ç›¤äºŒï¼ˆè®ŠåŒ–ï¼‰", "åœ“ç›¤ä¸‰ï¼ˆå·¥ä½œï¼‰", "åœ“ç›¤å››ï¼ˆæ¬ŠåŠ›ï¼‰", "åœ“ç›¤äº”ï¼ˆæ†‚æ…®ï¼‰",
      "åœ“ç›¤å…­ï¼ˆæˆåŠŸï¼‰", "åœ“ç›¤ä¸ƒï¼ˆå¤±æ•—ï¼‰", "åœ“ç›¤å…«ï¼ˆè¬¹æ…ï¼‰", "åœ“ç›¤ä¹ï¼ˆæ”¶ç©«ï¼‰", "åœ“ç›¤åï¼ˆè²¡å¯Œï¼‰",
      "åœ“ç›¤ç‹å­", "åœ“ç›¤å…¬ä¸»", "åœ“ç›¤å¥³ç‹", "åœ“ç›¤é¨å£«"
    ];

    let lastResult = "";
    const resultDiv = document.getElementById("result");
    const imagesDiv = document.getElementById("images");
    const historyDiv = document.getElementById("history");

    function drawCards() {
      const question = document.getElementById("question").value.trim();
      const shuffled = [...cards].sort(() => Math.random() - 0.5);
      const selected = shuffled.slice(0, 3);

      lastResult = `ğŸ´ æŠ½ç‰Œå•é¡Œï¼š${question || "ï¼ˆæœªè¼¸å…¥ï¼‰"}
\nğŸƒ æŠ½å‡ºçš„ä¸‰å¼µç‰Œï¼š\n1. ${selected[0]}\n2. ${selected[1]}\n3. ${selected[2]}`;

      resultDiv.innerText = lastResult;
      imagesDiv.innerHTML = selected.map(card => `<img src="images/thoth/${card}.jpg" alt="${card}">`).join("");

      let history = JSON.parse(localStorage.getItem("tarotHistory") || "[]");
      history.unshift(lastResult);
      if (history.length > 10) history.pop();
      localStorage.setItem("tarotHistory", JSON.stringify(history));

      renderHistory(history);
    }

    function renderHistory(history) {
      historyDiv.innerHTML = "<h3>ğŸ“œ æŠ½ç‰Œç´€éŒ„ï¼š</h3>" + history.map((r, i) => `
        <div class="history-entry">
          <pre>${r}</pre>
          <div class="history-entry-buttons">
            <button class="small-btn" onclick="copyText(${i})">ğŸ“‹ è¤‡è£½</button>
            <button class="small-btn" onclick="deleteEntry(${i})">ğŸ—‘ï¸ åˆªé™¤</button>
          </div>
        </div>
      `).join("");
    }

    function copyText(index) {
      const history = JSON.parse(localStorage.getItem("tarotHistory") || "[]");
      navigator.clipboard.writeText(history[index]);
    }

    function deleteEntry(index) {
      let history = JSON.parse(localStorage.getItem("tarotHistory") || "[]");
      history.splice(index, 1);
      localStorage.setItem("tarotHistory", JSON.stringify(history));
      renderHistory(history);
    }

    function copyResult() {
      navigator.clipboard.writeText(lastResult);
    }

    window.onload = () => {
      const history = JSON.parse(localStorage.getItem("tarotHistory") || "[]");
      if (history.length > 0) renderHistory(history);
    }
  </script>
</body>
</html>
